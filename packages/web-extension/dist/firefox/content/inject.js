(function(){"use strict";var D;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(D||(D={}));function Ot(e){return e.nodeType===e.ELEMENT_NODE}function fe(e){var t=e==null?void 0:e.host;return Boolean((t==null?void 0:t.shadowRoot)===e)}function me(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function Ft(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function xe(e){try{var t=e.rules||e.cssRules;return t?Ft(Array.from(t).map(ze).join("")):null}catch{return null}}function ze(e){var t=e.cssText;if(Et(e))try{t=xe(e.styleSheet)||t}catch{}return t}function Et(e){return"styleSheet"in e}var Pe=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var r;if(!t)return-1;var n=(r=this.getMeta(t))===null||r===void 0?void 0:r.id;return n!=null?n:-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var r=this,n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(function(o){return r.removeNodeFromMap(o)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,r){var n=r.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,r)},e.prototype.replace=function(t,r){var n=this.getNode(t);if(n){var o=this.nodeMetaMap.get(n);o&&this.nodeMetaMap.set(r,o)}this.idNodeMap.set(t,r)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function Lt(){return new Pe}function De(e){var t=e.maskInputOptions,r=e.tagName,n=e.type,o=e.value,a=e.maskInputFn,d=o||"",i=n&&n.toLowerCase();return(t[r.toLowerCase()]||i&&t[i])&&(a?d=a(d):d="*".repeat(d.length)),d}var Je="__rrweb_original__";function xt(e){var t=e.getContext("2d");if(!t)return!0;for(var r=50,n=0;n<e.width;n+=r)for(var o=0;o<e.height;o+=r){var a=t.getImageData,d=Je in a?a[Je]:a,i=new Uint32Array(d.call(t,n,o,Math.min(r,e.width-n),Math.min(r,e.height-o)).data.buffer);if(i.some(function(s){return s!==0}))return!1}return!0}var Dt=1,Wt=new RegExp("[^a-z0-9-_:]"),Ie=-2;function Qe(){return Dt++}function Bt(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return Wt.test(t)?"div":t}function Gt(e){return e.cssRules?Array.from(e.cssRules).map(function(t){return t.cssText||""}).join(""):""}function Zt(e){var t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var se,Xe,Vt=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Ut=/^(?:[a-z+]+:)?\/\//i,_t=/^www\..*/i,Kt=/^(data:)([^,]*),(.*)/i;function Ae(e,t){return(e||"").replace(Vt,function(r,n,o,a,d,i){var s=o||d||i,l=n||a||"";if(!s)return r;if(Ut.test(s)||_t.test(s)||Kt.test(s))return"url(".concat(l).concat(s).concat(l,")");if(s[0]==="/")return"url(".concat(l).concat(Zt(t)+s).concat(l,")");var u=t.split("/"),h=s.split("/");u.pop();for(var p=0,g=h;p<g.length;p++){var c=g[p];c!=="."&&(c===".."?u.pop():u.push(c))}return"url(".concat(l).concat(u.join("/")).concat(l,")")})}var Ht=/^[^ \t\n\r\u000c]+/,Yt=/^[, \t\n\r\u000c]+/;function zt(e,t){if(t.trim()==="")return t;var r=0;function n(l){var u,h=l.exec(t.substring(r));return h?(u=h[0],r+=u.length,u):""}for(var o=[];n(Yt),!(r>=t.length);){var a=n(Ht);if(a.slice(-1)===",")a=de(e,a.substring(0,a.length-1)),o.push(a);else{var d="";a=de(e,a);for(var i=!1;;){var s=t.charAt(r);if(s===""){o.push((a+d).trim());break}else if(i)s===")"&&(i=!1);else if(s===","){r+=1,o.push((a+d).trim());break}else s==="("&&(i=!0);d+=s,r+=1}}}return o.join(", ")}function de(e,t){if(!t||t.trim()==="")return t;var r=e.createElement("a");return r.href=t,r.href}function Pt(e){return Boolean(e.tagName==="svg"||e.ownerSVGElement)}function We(){var e=document.createElement("a");return e.href="",e.href}function je(e,t,r,n){return n&&(r==="src"||r==="href"&&!(t==="use"&&n[0]==="#")||r==="xlink:href"&&n[0]!=="#"||r==="background"&&(t==="table"||t==="td"||t==="th")?de(e,n):r==="srcset"?zt(e,n):r==="style"?Ae(n,We()):t==="object"&&r==="data"?de(e,n):n)}function qe(e,t,r){return(e==="video"||e==="audio")&&t==="autoplay"}function Jt(e,t,r){if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return r?e.matches(r):!1}function we(e,t,r){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return r?we(e.parentNode,t,r):!1;for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return r?we(e.parentNode,t,r):!1}function $e(e,t,r){var n=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(n===null)return!1;if(typeof t=="string"){if(n.classList.contains(t)||n.closest(".".concat(t)))return!0}else if(we(n,t,!0))return!0;return!!(r&&(n.matches(r)||n.closest(r)))}function Qt(e,t,r){var n=e.contentWindow;if(!!n){var o=!1,a;try{a=n.document.readyState}catch{return}if(a!=="complete"){var d=setTimeout(function(){o||(t(),o=!0)},r);e.addEventListener("load",function(){clearTimeout(d),o=!0,t()});return}var i="about:blank";if(n.location.href!==i||e.src===i||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}}function Xt(e,t,r){var n=!1,o;try{o=e.sheet}catch{return}if(!o){var a=setTimeout(function(){n||(t(),n=!0)},r);e.addEventListener("load",function(){clearTimeout(a),n=!0,t()})}}function jt(e,t){var r=t.doc,n=t.mirror,o=t.blockClass,a=t.blockSelector,d=t.maskTextClass,i=t.maskTextSelector,s=t.inlineStylesheet,l=t.maskInputOptions,u=l===void 0?{}:l,h=t.maskTextFn,p=t.maskInputFn,g=t.dataURLOptions,c=g===void 0?{}:g,f=t.inlineImages,S=t.recordCanvas,C=t.keepIframeSrcFn,m=t.newlyAddedElement,I=m===void 0?!1:m,w=qt(r,n);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:D.Document,childNodes:[],compatMode:e.compatMode}:{type:D.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:D.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:w};case e.ELEMENT_NODE:return er(e,{doc:r,blockClass:o,blockSelector:a,inlineStylesheet:s,maskInputOptions:u,maskInputFn:p,dataURLOptions:c,inlineImages:f,recordCanvas:S,keepIframeSrcFn:C,newlyAddedElement:I,rootId:w});case e.TEXT_NODE:return $t(e,{maskTextClass:d,maskTextSelector:i,maskTextFn:h,rootId:w});case e.CDATA_SECTION_NODE:return{type:D.CDATA,textContent:"",rootId:w};case e.COMMENT_NODE:return{type:D.Comment,textContent:e.textContent||"",rootId:w};default:return!1}}function qt(e,t){if(!!t.hasNode(e)){var r=t.getId(e);return r===1?void 0:r}}function $t(e,t){var r,n=t.maskTextClass,o=t.maskTextSelector,a=t.maskTextFn,d=t.rootId,i=e.parentNode&&e.parentNode.tagName,s=e.textContent,l=i==="STYLE"?!0:void 0,u=i==="SCRIPT"?!0:void 0;if(l&&s){try{e.nextSibling||e.previousSibling||!((r=e.parentNode.sheet)===null||r===void 0)&&r.cssRules&&(s=Gt(e.parentNode.sheet))}catch(h){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(h),e)}s=Ae(s,We())}return u&&(s="SCRIPT_PLACEHOLDER"),!l&&!u&&s&&$e(e,n,o)&&(s=a?a(s):s.replace(/[\S]/g,"*")),{type:D.Text,textContent:s||"",isStyle:l,rootId:d}}function er(e,t){for(var r=t.doc,n=t.blockClass,o=t.blockSelector,a=t.inlineStylesheet,d=t.maskInputOptions,i=d===void 0?{}:d,s=t.maskInputFn,l=t.dataURLOptions,u=l===void 0?{}:l,h=t.inlineImages,p=t.recordCanvas,g=t.keepIframeSrcFn,c=t.newlyAddedElement,f=c===void 0?!1:c,S=t.rootId,C=Jt(e,n,o),m=Bt(e),I={},w=e.attributes.length,Z=0;Z<w;Z++){var L=e.attributes[Z];qe(m,L.name,L.value)||(I[L.name]=je(r,m,L.name,L.value))}if(m==="link"&&a){var x=Array.from(r.styleSheets).find(function(K){return K.href===e.href}),R=null;x&&(R=xe(x)),R&&(delete I.rel,delete I.href,I._cssText=Ae(R,x.href))}if(m==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){var R=xe(e.sheet);R&&(I._cssText=Ae(R,We()))}if(m==="input"||m==="textarea"||m==="select"){var V=e.value,U=e.checked;if(I.type!=="radio"&&I.type!=="checkbox"&&I.type!=="submit"&&I.type!=="button"&&V){var H=e.hasAttribute("data-rr-is-password")?"password":typeof I.type=="string"?I.type.toLowerCase():null;I.value=De({type:H,tagName:m,value:V,maskInputOptions:i,maskInputFn:s})}else U&&(I.checked=U)}if(m==="option"&&(e.selected&&!i.select?I.selected=!0:delete I.selected),m==="canvas"&&p){if(e.__context==="2d")xt(e)||(I.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){var re=e.toDataURL(u.type,u.quality),z=document.createElement("canvas");z.width=e.width,z.height=e.height;var q=z.toDataURL(u.type,u.quality);re!==q&&(I.rr_dataURL=re)}}if(m==="img"&&h){se||(se=r.createElement("canvas"),Xe=se.getContext("2d"));var T=e,P=T.crossOrigin;T.crossOrigin="anonymous";var Q=function(){T.removeEventListener("load",Q);try{se.width=T.naturalWidth,se.height=T.naturalHeight,Xe.drawImage(T,0,0),I.rr_dataURL=se.toDataURL(u.type,u.quality)}catch(K){console.warn("Cannot inline img src=".concat(T.currentSrc,"! Error: ").concat(K))}P?I.crossOrigin=P:T.removeAttribute("crossorigin")};T.complete&&T.naturalWidth!==0?Q():T.addEventListener("load",Q)}if((m==="audio"||m==="video")&&(I.rr_mediaState=e.paused?"paused":"played",I.rr_mediaCurrentTime=e.currentTime),f||(e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop)),C){var $=e.getBoundingClientRect(),Y=$.width,X=$.height;I={class:I.class,rr_width:"".concat(Y,"px"),rr_height:"".concat(X,"px")}}return m==="iframe"&&!g(I.src)&&(e.contentDocument||(I.rr_src=I.src),delete I.src),{type:D.Element,tagName:m,attributes:I,childNodes:[],isSVG:Pt(e)||void 0,needBlock:C,rootId:S}}function k(e){return e==null?"":e.toLowerCase()}function tr(e,t){if(t.comment&&e.type===D.Comment)return!0;if(e.type===D.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(k(e.attributes.name).match(/^msapplication-tile(image|color)$/)||k(e.attributes.name)==="application-name"||k(e.attributes.rel)==="icon"||k(e.attributes.rel)==="apple-touch-icon"||k(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&k(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(k(e.attributes.property).match(/^(og|twitter|fb):/)||k(e.attributes.name).match(/^(og|twitter):/)||k(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(k(e.attributes.name)==="robots"||k(e.attributes.name)==="googlebot"||k(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(k(e.attributes.name)==="author"||k(e.attributes.name)==="generator"||k(e.attributes.name)==="framework"||k(e.attributes.name)==="publisher"||k(e.attributes.name)==="progid"||k(e.attributes.property).match(/^article:/)||k(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(k(e.attributes.name)==="google-site-verification"||k(e.attributes.name)==="yandex-verification"||k(e.attributes.name)==="csrf-token"||k(e.attributes.name)==="p:domain_verify"||k(e.attributes.name)==="verify-v1"||k(e.attributes.name)==="verification"||k(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function le(e,t){var r=t.doc,n=t.mirror,o=t.blockClass,a=t.blockSelector,d=t.maskTextClass,i=t.maskTextSelector,s=t.skipChild,l=s===void 0?!1:s,u=t.inlineStylesheet,h=u===void 0?!0:u,p=t.maskInputOptions,g=p===void 0?{}:p,c=t.maskTextFn,f=t.maskInputFn,S=t.slimDOMOptions,C=t.dataURLOptions,m=C===void 0?{}:C,I=t.inlineImages,w=I===void 0?!1:I,Z=t.recordCanvas,L=Z===void 0?!1:Z,x=t.onSerialize,R=t.onIframeLoad,V=t.iframeLoadTimeout,U=V===void 0?5e3:V,H=t.onStylesheetLoad,re=t.stylesheetLoadTimeout,z=re===void 0?5e3:re,q=t.keepIframeSrcFn,T=q===void 0?function(){return!1}:q,P=t.newlyAddedElement,Q=P===void 0?!1:P,$=t.preserveWhiteSpace,Y=$===void 0?!0:$,X=jt(e,{doc:r,mirror:n,blockClass:o,blockSelector:a,maskTextClass:d,maskTextSelector:i,inlineStylesheet:h,maskInputOptions:g,maskTextFn:c,maskInputFn:f,dataURLOptions:m,inlineImages:w,recordCanvas:L,keepIframeSrcFn:T,newlyAddedElement:Q});if(!X)return console.warn(e,"not serialized"),null;var K;n.hasNode(e)?K=n.getId(e):tr(X,S)||!Y&&X.type===D.Text&&!X.isStyle&&!X.textContent.replace(/^\s+|\s+$/gm,"").length?K=Ie:K=Qe();var E=Object.assign(X,{id:K});if(n.add(e,E),K===Ie)return null;x&&x(e);var pe=!l;if(E.type===D.Element){pe=pe&&!E.needBlock,delete E.needBlock;var Le=e.shadowRoot;Le&&me(Le)&&(E.isShadowHost=!0)}if((E.type===D.Document||E.type===D.Element)&&pe){S.headWhitespace&&E.type===D.Element&&E.tagName==="head"&&(Y=!1);for(var ee={doc:r,mirror:n,blockClass:o,blockSelector:a,maskTextClass:d,maskTextSelector:i,skipChild:l,inlineStylesheet:h,maskInputOptions:g,maskTextFn:c,maskInputFn:f,slimDOMOptions:S,dataURLOptions:m,inlineImages:w,recordCanvas:L,preserveWhiteSpace:Y,onSerialize:x,onIframeLoad:R,iframeLoadTimeout:U,onStylesheetLoad:H,stylesheetLoadTimeout:z,keepIframeSrcFn:T},j=0,ge=Array.from(e.childNodes);j<ge.length;j++){var oe=ge[j],y=le(oe,ee);y&&E.childNodes.push(y)}if(Ot(e)&&e.shadowRoot)for(var _=0,M=Array.from(e.shadowRoot.childNodes);_<M.length;_++){var oe=M[_],y=le(oe,ee);y&&(me(e.shadowRoot)&&(y.isShadow=!0),E.childNodes.push(y))}}return e.parentNode&&fe(e.parentNode)&&me(e.parentNode)&&(E.isShadow=!0),E.type===D.Element&&E.tagName==="iframe"&&Qt(e,function(){var O=e.contentDocument;if(O&&R){var te=le(O,{doc:O,mirror:n,blockClass:o,blockSelector:a,maskTextClass:d,maskTextSelector:i,skipChild:!1,inlineStylesheet:h,maskInputOptions:g,maskTextFn:c,maskInputFn:f,slimDOMOptions:S,dataURLOptions:m,inlineImages:w,recordCanvas:L,preserveWhiteSpace:Y,onSerialize:x,onIframeLoad:R,iframeLoadTimeout:U,onStylesheetLoad:H,stylesheetLoadTimeout:z,keepIframeSrcFn:T});te&&R(e,te)}},U),E.type===D.Element&&E.tagName==="link"&&E.attributes.rel==="stylesheet"&&Xt(e,function(){if(H){var O=le(e,{doc:r,mirror:n,blockClass:o,blockSelector:a,maskTextClass:d,maskTextSelector:i,skipChild:!1,inlineStylesheet:h,maskInputOptions:g,maskTextFn:c,maskInputFn:f,slimDOMOptions:S,dataURLOptions:m,inlineImages:w,recordCanvas:L,preserveWhiteSpace:Y,onSerialize:x,onIframeLoad:R,iframeLoadTimeout:U,onStylesheetLoad:H,stylesheetLoadTimeout:z,keepIframeSrcFn:T});O&&H(e,O)}},z),E}function rr(e,t){var r=t||{},n=r.mirror,o=n===void 0?new Pe:n,a=r.blockClass,d=a===void 0?"rr-block":a,i=r.blockSelector,s=i===void 0?null:i,l=r.maskTextClass,u=l===void 0?"rr-mask":l,h=r.maskTextSelector,p=h===void 0?null:h,g=r.inlineStylesheet,c=g===void 0?!0:g,f=r.inlineImages,S=f===void 0?!1:f,C=r.recordCanvas,m=C===void 0?!1:C,I=r.maskAllInputs,w=I===void 0?!1:I,Z=r.maskTextFn,L=r.maskInputFn,x=r.slimDOM,R=x===void 0?!1:x,V=r.dataURLOptions,U=r.preserveWhiteSpace,H=r.onSerialize,re=r.onIframeLoad,z=r.iframeLoadTimeout,q=r.onStylesheetLoad,T=r.stylesheetLoadTimeout,P=r.keepIframeSrcFn,Q=P===void 0?function(){return!1}:P,$=w===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:w===!1?{password:!0}:w,Y=R===!0||R==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:R==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:R===!1?{}:R;return le(e,{doc:e,mirror:o,blockClass:d,blockSelector:s,maskTextClass:u,maskTextSelector:p,skipChild:!1,inlineStylesheet:c,maskInputOptions:$,maskTextFn:Z,maskInputFn:L,slimDOMOptions:Y,dataURLOptions:V,inlineImages:S,recordCanvas:m,preserveWhiteSpace:U,onSerialize:H,onIframeLoad:re,iframeLoadTimeout:z,onStylesheetLoad:q,stylesheetLoadTimeout:T,keepIframeSrcFn:Q,newlyAddedElement:!1})}function B(e,t,r=document){const n={capture:!0,passive:!0};return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}const ce=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let et={map:{},getId(){return console.error(ce),-1},getNode(){return console.error(ce),null},removeNodeFromMap(){console.error(ce)},has(){return console.error(ce),!1},reset(){console.error(ce)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(et=new Proxy(et,{get(e,t,r){return t==="map"&&console.error(ce),Reflect.get(e,t,r)}}));function Ce(e,t,r={}){let n=null,o=0;return function(...a){const d=Date.now();!o&&r.leading===!1&&(o=d);const i=t-(d-o),s=this;i<=0||i>t?(n&&(clearTimeout(n),n=null),o=d,e.apply(s,a)):!n&&r.trailing!==!1&&(n=setTimeout(()=>{o=r.leading===!1?0:Date.now(),n=null,e.apply(s,a)},i))}}function ke(e,t,r,n,o=window){const a=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,n?r:{set(d){setTimeout(()=>{r.set.call(this,d)},0),a&&a.set&&a.set.call(this,d)}}),()=>ke(e,t,a||{},!0)}function ye(e,t,r){try{if(!(t in e))return()=>{};const n=e[t],o=r(n);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,()=>{e[t]=n}}catch{return()=>{}}}function tt(e){var t,r,n,o,a,d;const i=e.document;return{left:i.scrollingElement?i.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:(i==null?void 0:i.documentElement.scrollLeft)||((r=(t=i==null?void 0:i.body)===null||t===void 0?void 0:t.parentElement)===null||r===void 0?void 0:r.scrollLeft)||((n=i==null?void 0:i.body)===null||n===void 0?void 0:n.scrollLeft)||0,top:i.scrollingElement?i.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:(i==null?void 0:i.documentElement.scrollTop)||((a=(o=i==null?void 0:i.body)===null||o===void 0?void 0:o.parentElement)===null||a===void 0?void 0:a.scrollTop)||((d=i==null?void 0:i.body)===null||d===void 0?void 0:d.scrollTop)||0}}function rt(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function nt(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function G(e,t,r,n){if(!e)return!1;const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!o)return!1;try{if(typeof t=="string"){if(o.classList.contains(t)||n&&o.closest("."+t)!==null)return!0}else if(we(o,t,n))return!0}catch{}return!!(r&&(o.matches(r)||n&&o.closest(r)!==null))}function nr(e,t){return t.getId(e)!==-1}function Be(e,t){return t.getId(e)===Ie}function ot(e,t){if(fe(e))return!1;const r=t.getId(e);return t.has(r)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?ot(e.parentNode,t):!0:!0}function at(e){return Boolean(e.changedTouches)}function or(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let r=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}function it(e,t){return Boolean(e.nodeName==="IFRAME"&&t.getMeta(e))}function st(e,t){return Boolean(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Ge(e){return Boolean(e==null?void 0:e.shadowRoot)}class ar{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var r;return(r=this.styleIDMap.get(t))!==null&&r!==void 0?r:-1}has(t){return this.styleIDMap.has(t)}add(t,r){if(this.has(t))return this.getId(t);let n;return r===void 0?n=this.id++:n=r,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function dt(e){var t,r;let n=null;return((r=(t=e.getRootNode)===null||t===void 0?void 0:t.call(e))===null||r===void 0?void 0:r.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(n=e.getRootNode().host),n}function ir(e){let t=e,r;for(;r=dt(t);)t=r;return t}function sr(e){const t=e.ownerDocument;if(!t)return!1;const r=ir(e);return t.contains(r)}function lt(e){const t=e.ownerDocument;return t?t.contains(e)||sr(e):!1}function ct(e){return e.hasAttribute("data-rr-is-password")?"password":e.hasAttribute("type")?e.getAttribute("type").toLowerCase():null}var A=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(A||{}),b=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(b||{}),Ze=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Ze||{}),ue=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(ue||{});function ut(e){return"__ln"in e}class dr{constructor(){this.length=0,this.head=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let r=this.head;for(let n=0;n<t;n++)r=(r==null?void 0:r.next)||null;return r}addNode(t){const r={value:t,previous:null,next:null};if(t.__ln=r,t.previousSibling&&ut(t.previousSibling)){const n=t.previousSibling.__ln.next;r.next=n,r.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=r,n&&(n.previous=r)}else if(t.nextSibling&&ut(t.nextSibling)&&t.nextSibling.__ln.previous){const n=t.nextSibling.__ln.previous;r.previous=n,r.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=r,n&&(n.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;this.length++}removeNode(t){const r=t.__ln;!this.head||(r.previous?(r.previous.next=r.next,r.next&&(r.next.previous=r.previous)):(this.head=r.next,this.head&&(this.head.previous=null)),t.__ln&&delete t.__ln,this.length--)}}const ht=(e,t)=>`${e}@${t}`;class lr{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],r=new dr,n=i=>{let s=i,l=Ie;for(;l===Ie;)s=s&&s.nextSibling,l=s&&this.mirror.getId(s);return l},o=i=>{if(!i.parentNode||!lt(i))return;const s=fe(i.parentNode)?this.mirror.getId(dt(i)):this.mirror.getId(i.parentNode),l=n(i);if(s===-1||l===-1)return r.addNode(i);const u=le(i,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:h=>{it(h,this.mirror)&&this.iframeManager.addIframe(h),st(h,this.mirror)&&this.stylesheetManager.trackLinkElement(h),Ge(i)&&this.shadowDomManager.addShadowRoot(i.shadowRoot,this.doc)},onIframeLoad:(h,p)=>{this.iframeManager.attachIframe(h,p),this.shadowDomManager.observeAttachShadow(h)},onStylesheetLoad:(h,p)=>{this.stylesheetManager.attachLinkElement(h,p)}});u&&t.push({parentId:s,nextId:l,node:u})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const i of this.movedSet)pt(this.removes,i,this.mirror)&&!this.movedSet.has(i.parentNode)||o(i);for(const i of this.addedSet)!ft(this.droppedSet,i)&&!pt(this.removes,i,this.mirror)||ft(this.movedSet,i)?o(i):this.droppedSet.add(i);let a=null;for(;r.length;){let i=null;if(a){const s=this.mirror.getId(a.value.parentNode),l=n(a.value);s!==-1&&l!==-1&&(i=a)}if(!i)for(let s=r.length-1;s>=0;s--){const l=r.get(s);if(l){const u=this.mirror.getId(l.value.parentNode);if(n(l.value)===-1)continue;if(u!==-1){i=l;break}else{const p=l.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const g=p.parentNode.host;if(this.mirror.getId(g)!==-1){i=l;break}}}}}if(!i){for(;r.head;)r.removeNode(r.head.value);break}a=i.previous,r.removeNode(i.value),o(i.value)}const d={texts:this.texts.map(i=>({id:this.mirror.getId(i.node),value:i.value})).filter(i=>this.mirror.has(i.id)),attributes:this.attributes.map(i=>({id:this.mirror.getId(i.node),attributes:i.attributes})).filter(i=>this.mirror.has(i.id)),removes:this.removes,adds:t};!d.texts.length&&!d.attributes.length&&!d.removes.length&&!d.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(d))},this.processMutation=t=>{if(!Be(t.target,this.mirror))switch(t.type){case"characterData":{const r=t.target.textContent;!G(t.target,this.blockClass,this.blockSelector,!1)&&r!==t.oldValue&&this.texts.push({value:$e(t.target,this.maskTextClass,this.maskTextSelector)&&r?this.maskTextFn?this.maskTextFn(r):r.replace(/[\S]/g,"*"):r,node:t.target});break}case"attributes":{const r=t.target;let n=t.attributeName,o=t.target.getAttribute(n);if(n==="value"){const d=ct(r);o=De({maskInputOptions:this.maskInputOptions,tagName:r.tagName,type:d,value:o,maskInputFn:this.maskInputFn})}if(G(t.target,this.blockClass,this.blockSelector,!1)||o===t.oldValue)return;let a=this.attributes.find(d=>d.node===t.target);if(r.tagName==="IFRAME"&&n==="src"&&!this.keepIframeSrcFn(o))if(!r.contentDocument)n="rr_src";else return;if(a||(a={node:t.target,attributes:{}},this.attributes.push(a)),n==="type"&&r.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),n==="style"){const d=this.doc.createElement("span");t.oldValue&&d.setAttribute("style",t.oldValue),(a.attributes.style===void 0||a.attributes.style===null)&&(a.attributes.style={});const i=a.attributes.style;for(const s of Array.from(r.style)){const l=r.style.getPropertyValue(s),u=r.style.getPropertyPriority(s);(l!==d.style.getPropertyValue(s)||u!==d.style.getPropertyPriority(s))&&(u===""?i[s]=l:i[s]=[l,u])}for(const s of Array.from(d.style))r.style.getPropertyValue(s)===""&&(i[s]=!1)}else qe(r.tagName,n)||(a.attributes[n]=je(this.doc,r.tagName,n,o));break}case"childList":{if(G(t.target,this.blockClass,this.blockSelector,!0))return;t.addedNodes.forEach(r=>this.genAdds(r,t.target)),t.removedNodes.forEach(r=>{const n=this.mirror.getId(r),o=fe(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);G(t.target,this.blockClass,this.blockSelector,!1)||Be(r,this.mirror)||!nr(r,this.mirror)||(this.addedSet.has(r)?(Ve(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(t.target)&&n===-1||ot(t.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[ht(n,o)]?Ve(this.movedSet,r):this.removes.push({parentId:o,id:n,isShadow:fe(t.target)&&me(t.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(t,r)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)){if(this.mirror.hasNode(t)){if(Be(t,this.mirror))return;this.movedSet.add(t);let n=null;r&&this.mirror.hasNode(r)&&(n=this.mirror.getId(r)),n&&n!==-1&&(this.movedMap[ht(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);G(t,this.blockClass,this.blockSelector,!1)||(t.childNodes.forEach(n=>this.genAdds(n)),Ge(t)&&t.shadowRoot.childNodes.forEach(n=>{this.processedNodeManager.add(n,this),this.genAdds(n,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(r=>{this[r]=t[r]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Ve(e,t){e.delete(t),t.childNodes.forEach(r=>Ve(e,r))}function pt(e,t,r){return e.length===0?!1:gt(e,t,r)}function gt(e,t,r){const{parentNode:n}=t;if(!n)return!1;const o=r.getId(n);return e.some(a=>a.id===o)?!0:gt(e,n,r)}function ft(e,t){return e.size===0?!1:mt(e,t)}function mt(e,t){const{parentNode:r}=t;return r?e.has(r)?!0:mt(e,r):!1}let Se;function cr(e){Se=e}function ur(){Se=void 0}const v=e=>Se?(...r)=>{try{return e(...r)}catch(n){if(Se&&Se(n)===!0)return;throw n}}:e,ae=[];function ve(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch{return e.target}}function It(e,t){var r,n;const o=new lr;ae.push(o),o.init(e);let a=window.MutationObserver||window.__rrMutationObserver;const d=(n=(r=window==null?void 0:window.Zone)===null||r===void 0?void 0:r.__symbol__)===null||n===void 0?void 0:n.call(r,"MutationObserver");d&&window[d]&&(a=window[d]);const i=new a(v(o.processMutations.bind(o)));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function hr({mousemoveCb:e,sampling:t,doc:r,mirror:n}){if(t.mousemove===!1)return()=>{};const o=typeof t.mousemove=="number"?t.mousemove:50,a=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let d=[],i;const s=Ce(v(h=>{const p=Date.now()-i;e(d.map(g=>(g.timeOffset-=p,g)),h),d=[],i=null}),a),l=v(Ce(v(h=>{const p=ve(h),{clientX:g,clientY:c}=at(h)?h.changedTouches[0]:h;i||(i=Date.now()),d.push({x:g,y:c,id:n.getId(p),timeOffset:Date.now()-i}),s(typeof DragEvent<"u"&&h instanceof DragEvent?b.Drag:h instanceof MouseEvent?b.MouseMove:b.TouchMove)}),o,{trailing:!1})),u=[B("mousemove",l,r),B("touchmove",l,r),B("drag",l,r)];return v(()=>{u.forEach(h=>h())})}function pr({mouseInteractionCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,sampling:a}){if(a.mouseInteraction===!1)return()=>{};const d=a.mouseInteraction===!0||a.mouseInteraction===void 0?{}:a.mouseInteraction,i=[],s=l=>u=>{const h=ve(u);if(G(h,n,o,!0))return;const p=at(u)?u.changedTouches[0]:u;if(!p)return;const g=r.getId(h),{clientX:c,clientY:f}=p;v(e)({type:Ze[l],id:g,x:c,y:f})};return Object.keys(Ze).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&d[l]!==!1).forEach(l=>{const u=l.toLowerCase(),h=s(l);i.push(B(u,h,t))}),v(()=>{i.forEach(l=>l())})}function Ct({scrollCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,sampling:a}){const d=v(Ce(v(i=>{const s=ve(i);if(!s||G(s,n,o,!0))return;const l=r.getId(s);if(s===t&&t.defaultView){const u=tt(t.defaultView);e({id:l,x:u.left,y:u.top})}else e({id:l,x:s.scrollLeft,y:s.scrollTop})}),a.scroll||100));return B("scroll",d,t)}function gr({viewportResizeCb:e}){let t=-1,r=-1;const n=v(Ce(v(()=>{const o=rt(),a=nt();(t!==o||r!==a)&&(e({width:Number(a),height:Number(o)}),t=o,r=a)}),200));return B("resize",n,window)}function yt(e,t){const r=Object.assign({},e);return t||delete r.userTriggered,r}const fr=["INPUT","TEXTAREA","SELECT"],St=new WeakMap;function mr({inputCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,ignoreClass:a,maskInputOptions:d,maskInputFn:i,sampling:s,userTriggeredOnInput:l}){function u(C){let m=ve(C);const I=C.isTrusted,w=m&&m.tagName;if(m&&w==="OPTION"&&(m=m.parentElement),!m||!w||fr.indexOf(w)<0||G(m,n,o,!0)||m.classList.contains(a))return;let Z=m.value,L=!1;const x=ct(m)||"";x==="radio"||x==="checkbox"?L=m.checked:(d[w.toLowerCase()]||d[x])&&(Z=De({maskInputOptions:d,tagName:w,type:x,value:Z,maskInputFn:i})),h(m,v(yt)({text:Z,isChecked:L,userTriggered:I},l));const R=m.name;x==="radio"&&R&&L&&t.querySelectorAll(`input[type="radio"][name="${R}"]`).forEach(V=>{V!==m&&h(V,v(yt)({text:V.value,isChecked:!L,userTriggered:!1},l))})}function h(C,m){const I=St.get(C);if(!I||I.text!==m.text||I.isChecked!==m.isChecked){St.set(C,m);const w=r.getId(C);v(e)(Object.assign(Object.assign({},m),{id:w}))}}const g=(s.input==="last"?["change"]:["input","change"]).map(C=>B(C,v(u),t)),c=t.defaultView;if(!c)return()=>{g.forEach(C=>C())};const f=c.Object.getOwnPropertyDescriptor(c.HTMLInputElement.prototype,"value"),S=[[c.HTMLInputElement.prototype,"value"],[c.HTMLInputElement.prototype,"checked"],[c.HTMLSelectElement.prototype,"value"],[c.HTMLTextAreaElement.prototype,"value"],[c.HTMLSelectElement.prototype,"selectedIndex"],[c.HTMLOptionElement.prototype,"selected"]];return f&&f.set&&g.push(...S.map(C=>ke(C[0],C[1],{set(){v(u)({target:this,isTrusted:!1})}},!1,c))),v(()=>{g.forEach(C=>C())})}function Me(e){const t=[];function r(n,o){if(Re("CSSGroupingRule")&&n.parentRule instanceof CSSGroupingRule||Re("CSSMediaRule")&&n.parentRule instanceof CSSMediaRule||Re("CSSSupportsRule")&&n.parentRule instanceof CSSSupportsRule||Re("CSSConditionRule")&&n.parentRule instanceof CSSConditionRule){const d=Array.from(n.parentRule.cssRules).indexOf(n);o.unshift(d)}else if(n.parentStyleSheet){const d=Array.from(n.parentStyleSheet.cssRules).indexOf(n);o.unshift(d)}return o}return r(e,t)}function ne(e,t,r){let n,o;return e?(e.ownerNode?n=t.getId(e.ownerNode):o=r.getId(e),{styleId:o,id:n}):{}}function Ir({styleSheetRuleCb:e,mirror:t,stylesheetManager:r},{win:n}){if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};const o=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:v((u,h,p)=>{const[g,c]=p,{id:f,styleId:S}=ne(h,t,r.styleMirror);return(f&&f!==-1||S&&S!==-1)&&e({id:f,styleId:S,adds:[{rule:g,index:c}]}),u.apply(h,p)})});const a=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=new Proxy(a,{apply:v((u,h,p)=>{const[g]=p,{id:c,styleId:f}=ne(h,t,r.styleMirror);return(c&&c!==-1||f&&f!==-1)&&e({id:c,styleId:f,removes:[{index:g}]}),u.apply(h,p)})});let d;n.CSSStyleSheet.prototype.replace&&(d=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=new Proxy(d,{apply:v((u,h,p)=>{const[g]=p,{id:c,styleId:f}=ne(h,t,r.styleMirror);return(c&&c!==-1||f&&f!==-1)&&e({id:c,styleId:f,replace:g}),u.apply(h,p)})}));let i;n.CSSStyleSheet.prototype.replaceSync&&(i=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=new Proxy(i,{apply:v((u,h,p)=>{const[g]=p,{id:c,styleId:f}=ne(h,t,r.styleMirror);return(c&&c!==-1||f&&f!==-1)&&e({id:c,styleId:f,replaceSync:g}),u.apply(h,p)})}));const s={};Te("CSSGroupingRule")?s.CSSGroupingRule=n.CSSGroupingRule:(Te("CSSMediaRule")&&(s.CSSMediaRule=n.CSSMediaRule),Te("CSSConditionRule")&&(s.CSSConditionRule=n.CSSConditionRule),Te("CSSSupportsRule")&&(s.CSSSupportsRule=n.CSSSupportsRule));const l={};return Object.entries(s).forEach(([u,h])=>{l[u]={insertRule:h.prototype.insertRule,deleteRule:h.prototype.deleteRule},h.prototype.insertRule=new Proxy(l[u].insertRule,{apply:v((p,g,c)=>{const[f,S]=c,{id:C,styleId:m}=ne(g.parentStyleSheet,t,r.styleMirror);return(C&&C!==-1||m&&m!==-1)&&e({id:C,styleId:m,adds:[{rule:f,index:[...Me(g),S||0]}]}),p.apply(g,c)})}),h.prototype.deleteRule=new Proxy(l[u].deleteRule,{apply:v((p,g,c)=>{const[f]=c,{id:S,styleId:C}=ne(g.parentStyleSheet,t,r.styleMirror);return(S&&S!==-1||C&&C!==-1)&&e({id:S,styleId:C,removes:[{index:[...Me(g),f]}]}),p.apply(g,c)})})}),v(()=>{n.CSSStyleSheet.prototype.insertRule=o,n.CSSStyleSheet.prototype.deleteRule=a,d&&(n.CSSStyleSheet.prototype.replace=d),i&&(n.CSSStyleSheet.prototype.replaceSync=i),Object.entries(s).forEach(([u,h])=>{h.prototype.insertRule=l[u].insertRule,h.prototype.deleteRule=l[u].deleteRule})})}function vt({mirror:e,stylesheetManager:t},r){var n,o,a;let d=null;r.nodeName==="#document"?d=e.getId(r):d=e.getId(r.host);const i=r.nodeName==="#document"?(n=r.defaultView)===null||n===void 0?void 0:n.Document:(a=(o=r.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||a===void 0?void 0:a.ShadowRoot,s=Object.getOwnPropertyDescriptor(i==null?void 0:i.prototype,"adoptedStyleSheets");return d===null||d===-1||!i||!s?()=>{}:(Object.defineProperty(r,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){var l;return(l=s.get)===null||l===void 0?void 0:l.call(this)},set(l){var u;const h=(u=s.set)===null||u===void 0?void 0:u.call(this,l);if(d!==null&&d!==-1)try{t.adoptStyleSheets(l,d)}catch{}return h}}),v(()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))}function Cr({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:r,stylesheetManager:n},{win:o}){const a=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(a,{apply:v((i,s,l)=>{var u;const[h,p,g]=l;if(r.has(h))return a.apply(s,[h,p,g]);const{id:c,styleId:f}=ne((u=s.parentRule)===null||u===void 0?void 0:u.parentStyleSheet,t,n.styleMirror);return(c&&c!==-1||f&&f!==-1)&&e({id:c,styleId:f,set:{property:h,value:p,priority:g},index:Me(s.parentRule)}),i.apply(s,l)})});const d=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(d,{apply:v((i,s,l)=>{var u;const[h]=l;if(r.has(h))return d.apply(s,[h]);const{id:p,styleId:g}=ne((u=s.parentRule)===null||u===void 0?void 0:u.parentStyleSheet,t,n.styleMirror);return(p&&p!==-1||g&&g!==-1)&&e({id:p,styleId:g,remove:{property:h},index:Me(s.parentRule)}),i.apply(s,l)})}),v(()=>{o.CSSStyleDeclaration.prototype.setProperty=a,o.CSSStyleDeclaration.prototype.removeProperty=d})}function yr({mediaInteractionCb:e,blockClass:t,blockSelector:r,mirror:n,sampling:o}){const a=v(i=>Ce(v(s=>{const l=ve(s);if(!l||G(l,t,r,!0))return;const{currentTime:u,volume:h,muted:p,playbackRate:g}=l;e({type:i,id:n.getId(l),currentTime:u,volume:h,muted:p,playbackRate:g})}),o.media||500)),d=[B("play",a(0)),B("pause",a(1)),B("seeked",a(2)),B("volumechange",a(3)),B("ratechange",a(4))];return v(()=>{d.forEach(i=>i())})}function Sr({fontCb:e,doc:t}){const r=t.defaultView;if(!r)return()=>{};const n=[],o=new WeakMap,a=r.FontFace;r.FontFace=function(s,l,u){const h=new a(s,l,u);return o.set(h,{family:s,buffer:typeof l!="string",descriptors:u,fontSource:typeof l=="string"?l:JSON.stringify(Array.from(new Uint8Array(l)))}),h};const d=ye(t.fonts,"add",function(i){return function(s){return setTimeout(v(()=>{const l=o.get(s);l&&(e(l),o.delete(s))}),0),i.apply(this,[s])}});return n.push(()=>{r.FontFace=a}),n.push(d),v(()=>{n.forEach(i=>i())})}function vr(e){const{doc:t,mirror:r,blockClass:n,blockSelector:o,selectionCb:a}=e;let d=!0;const i=v(()=>{const s=t.getSelection();if(!s||d&&(s==null?void 0:s.isCollapsed))return;d=s.isCollapsed||!1;const l=[],u=s.rangeCount||0;for(let h=0;h<u;h++){const p=s.getRangeAt(h),{startContainer:g,startOffset:c,endContainer:f,endOffset:S}=p;G(g,n,o,!0)||G(f,n,o,!0)||l.push({start:r.getId(g),startOffset:c,end:r.getId(f),endOffset:S})}a({ranges:l})});return i(),B("selectionchange",i)}function br(e,t){const{mutationCb:r,mousemoveCb:n,mouseInteractionCb:o,scrollCb:a,viewportResizeCb:d,inputCb:i,mediaInteractionCb:s,styleSheetRuleCb:l,styleDeclarationCb:u,canvasMutationCb:h,fontCb:p,selectionCb:g}=e;e.mutationCb=(...c)=>{t.mutation&&t.mutation(...c),r(...c)},e.mousemoveCb=(...c)=>{t.mousemove&&t.mousemove(...c),n(...c)},e.mouseInteractionCb=(...c)=>{t.mouseInteraction&&t.mouseInteraction(...c),o(...c)},e.scrollCb=(...c)=>{t.scroll&&t.scroll(...c),a(...c)},e.viewportResizeCb=(...c)=>{t.viewportResize&&t.viewportResize(...c),d(...c)},e.inputCb=(...c)=>{t.input&&t.input(...c),i(...c)},e.mediaInteractionCb=(...c)=>{t.mediaInteaction&&t.mediaInteaction(...c),s(...c)},e.styleSheetRuleCb=(...c)=>{t.styleSheetRule&&t.styleSheetRule(...c),l(...c)},e.styleDeclarationCb=(...c)=>{t.styleDeclaration&&t.styleDeclaration(...c),u(...c)},e.canvasMutationCb=(...c)=>{t.canvasMutation&&t.canvasMutation(...c),h(...c)},e.fontCb=(...c)=>{t.font&&t.font(...c),p(...c)},e.selectionCb=(...c)=>{t.selection&&t.selection(...c),g(...c)}}function Ar(e,t={}){const r=e.doc.defaultView;if(!r)return()=>{};br(e,t);const n=It(e,e.doc),o=hr(e),a=pr(e),d=Ct(e),i=gr(e),s=mr(e),l=yr(e),u=Ir(e,{win:r}),h=vt(e,e.doc),p=Cr(e,{win:r}),g=e.collectFonts?Sr(e):()=>{},c=vr(e),f=[];for(const S of e.plugins)f.push(S.observer(S.callback,r,S.options));return v(()=>{ae.forEach(S=>S.reset()),n.disconnect(),o(),a(),d(),i(),s(),l(),u(),h(),p(),g(),c(),f.forEach(S=>S())})}function Re(e){return typeof window[e]<"u"}function Te(e){return Boolean(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class bt{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,r,n,o){const a=n||this.getIdToRemoteIdMap(t),d=o||this.getRemoteIdToIdMap(t);let i=a.get(r);return i||(i=this.generateIdFn(),a.set(r,i),d.set(i,r)),i}getIds(t,r){const n=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return r.map(a=>this.getId(t,a,n,o))}getRemoteId(t,r,n){const o=n||this.getRemoteIdToIdMap(t);if(typeof r!="number")return r;const a=o.get(r);return a||-1}getRemoteIds(t,r){const n=this.getRemoteIdToIdMap(t);return r.map(o=>this.getRemoteId(t,o,n))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let r=this.iframeIdToRemoteIdMap.get(t);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(t,r)),r}getRemoteIdToIdMap(t){let r=this.iframeRemoteIdToIdMap.get(t);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(t,r)),r}}class wr{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new bt(Qe),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new bt(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,r){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(n=this.loadListener)===null||n===void 0||n.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const r=t;if(r.data.type!=="rrweb"||r.origin!==r.data.origin||!t.source)return;const o=this.crossOriginIframeMap.get(t.source);if(!o)return;const a=this.transformCrossOriginEvent(o,r.data.event);a&&this.wrappedEmit(a,r.data.isCheckout)}transformCrossOriginEvent(t,r){var n;switch(r.type){case A.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(r.data.node,t);const o=r.data.node.id;return this.crossOriginIframeRootIdMap.set(t,o),this.patchRootIdOnNode(r.data.node,o),{timestamp:r.timestamp,type:A.IncrementalSnapshot,data:{source:b.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case A.Meta:case A.Load:case A.DomContentLoaded:return!1;case A.Plugin:return r;case A.Custom:return this.replaceIds(r.data.payload,t,["id","parentId","previousId","nextId"]),r;case A.IncrementalSnapshot:switch(r.data.source){case b.Mutation:return r.data.adds.forEach(o=>{this.replaceIds(o,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(o.node,t);const a=this.crossOriginIframeRootIdMap.get(t);a&&this.patchRootIdOnNode(o.node,a)}),r.data.removes.forEach(o=>{this.replaceIds(o,t,["parentId","id"])}),r.data.attributes.forEach(o=>{this.replaceIds(o,t,["id"])}),r.data.texts.forEach(o=>{this.replaceIds(o,t,["id"])}),r;case b.Drag:case b.TouchMove:case b.MouseMove:return r.data.positions.forEach(o=>{this.replaceIds(o,t,["id"])}),r;case b.ViewportResize:return!1;case b.MediaInteraction:case b.MouseInteraction:case b.Scroll:case b.CanvasMutation:case b.Input:return this.replaceIds(r.data,t,["id"]),r;case b.StyleSheetRule:case b.StyleDeclaration:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleId"]),r;case b.Font:return r;case b.Selection:return r.data.ranges.forEach(o=>{this.replaceIds(o,t,["start","end"])}),r;case b.AdoptedStyleSheet:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleIds"]),(n=r.data.styles)===null||n===void 0||n.forEach(o=>{this.replaceStyleIds(o,t,["styleId"])}),r}}}replace(t,r,n,o){for(const a of o)!Array.isArray(r[a])&&typeof r[a]!="number"||(Array.isArray(r[a])?r[a]=t.getIds(n,r[a]):r[a]=t.getId(n,r[a]));return r}replaceIds(t,r,n){return this.replace(this.crossOriginIframeMirror,t,r,n)}replaceStyleIds(t,r,n){return this.replace(this.crossOriginIframeStyleMirror,t,r,n)}replaceIdOnNode(t,r){this.replaceIds(t,r,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(n=>{this.replaceIdOnNode(n,r)})}patchRootIdOnNode(t,r){t.type!==D.Document&&!t.rootId&&(t.rootId=r),"childNodes"in t&&t.childNodes.forEach(n=>{this.patchRootIdOnNode(n,r)})}}class kr{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,r){if(!me(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t);const n=It(Object.assign(Object.assign({},this.bypassOptions),{doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(Ct(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))),setTimeout(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(vt({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){!t.contentWindow||!t.contentDocument||this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,r){const n=this;this.restoreHandlers.push(ye(t.prototype,"attachShadow",function(o){return function(a){const d=o.call(this,a);return this.shadowRoot&&lt(this)&&n.addShadowRoot(this.shadowRoot,r),d}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function Mr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Rr(e,t,r,n){function o(a){return a instanceof r?a:new r(function(d){d(a)})}return new(r||(r=Promise))(function(a,d){function i(u){try{l(n.next(u))}catch(h){d(h)}}function s(u){try{l(n.throw(u))}catch(h){d(h)}}function l(u){u.done?a(u.value):o(u.value).then(i,s)}l((n=n.apply(e,t||[])).next())})}for(var he="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tr=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ne=0;Ne<he.length;Ne++)Tr[he.charCodeAt(Ne)]=Ne;var Nr=function(e){var t=new Uint8Array(e),r,n=t.length,o="";for(r=0;r<n;r+=3)o+=he[t[r]>>2],o+=he[(t[r]&3)<<4|t[r+1]>>4],o+=he[(t[r+1]&15)<<2|t[r+2]>>6],o+=he[t[r+2]&63];return n%3===2?o=o.substring(0,o.length-1)+"=":n%3===1&&(o=o.substring(0,o.length-2)+"=="),o};const At=new Map;function Or(e,t){let r=At.get(e);return r||(r=new Map,At.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}const wt=(e,t,r)=>{if(!e||!(Mt(e,t)||typeof e=="object"))return;const n=e.constructor.name,o=Or(r,n);let a=o.indexOf(e);return a===-1&&(a=o.length,o.push(e)),a};function Oe(e,t,r){if(e instanceof Array)return e.map(n=>Oe(n,t,r));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const n=e.constructor.name,o=Nr(e);return{rr_type:n,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Oe(e.buffer,t,r),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const n=e.constructor.name,{src:o}=e;return{rr_type:n,src:o}}else if(e instanceof HTMLCanvasElement){const n="HTMLImageElement",o=e.toDataURL();return{rr_type:n,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Oe(e.data,t,r),e.width,e.height]};if(Mt(e,t)||typeof e=="object"){const n=e.constructor.name,o=wt(e,t,r);return{rr_type:n,index:o}}}}return e}const kt=(e,t,r)=>[...e].map(n=>Oe(n,t,r)),Mt=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(o=>typeof t[o]=="function");return Boolean(n.find(o=>e instanceof t[o]))};function Fr(e,t,r,n){const o=[],a=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const d of a)try{if(typeof t.CanvasRenderingContext2D.prototype[d]!="function")continue;const i=ye(t.CanvasRenderingContext2D.prototype,d,function(s){return function(...l){return G(this.canvas,r,n,!0)||setTimeout(()=>{const u=kt([...l],t,this);e(this.canvas,{type:ue["2D"],property:d,args:u})},0),s.apply(this,l)}});o.push(i)}catch{const s=ke(t.CanvasRenderingContext2D.prototype,d,{set(l){e(this.canvas,{type:ue["2D"],property:d,args:[l],setter:!0})}});o.push(s)}return()=>{o.forEach(d=>d())}}function Rt(e,t,r){const n=[];try{const o=ye(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(d,...i){return G(this,t,r,!0)||"__context"in this||(this.__context=d),a.apply(this,[d,...i])}});n.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{n.forEach(o=>o())}}function Tt(e,t,r,n,o,a,d){const i=[],s=Object.getOwnPropertyNames(e);for(const l of s)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(l))try{if(typeof e[l]!="function")continue;const u=ye(e,l,function(h){return function(...p){const g=h.apply(this,p);if(wt(g,d,this),!G(this.canvas,n,o,!0)){const c=kt([...p],d,this),f={type:t,property:l,args:c};r(this.canvas,f)}return g}});i.push(u)}catch{const h=ke(e,l,{set(p){r(this.canvas,{type:t,property:l,args:[p],setter:!0})}});i.push(h)}return i}function Er(e,t,r,n,o){const a=[];return a.push(...Tt(t.WebGLRenderingContext.prototype,ue.WebGL,e,r,n,o,t)),typeof t.WebGL2RenderingContext<"u"&&a.push(...Tt(t.WebGL2RenderingContext.prototype,ue.WebGL2,e,r,n,o,t)),()=>{a.forEach(d=>d())}}function Lr(e,t){var r=atob(e);if(t){for(var n=new Uint8Array(r.length),o=0,a=r.length;o<a;++o)n[o]=r.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return r}function xr(e,t,r){var n=t===void 0?null:t,o=r===void 0?!1:r,a=Lr(e,o),d=a.indexOf(`
`,10)+1,i=a.substring(d)+(n?"//# sourceMappingURL="+n:""),s=new Blob([i],{type:"application/javascript"});return URL.createObjectURL(s)}function Dr(e,t,r){var n;return function(a){return n=n||xr(e,t,r),new Worker(n,a)}}var Wr=Dr("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",null,!1);class Br{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(s,l)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(s)||this.pendingCanvasMutations.set(s,[]),this.pendingCanvasMutations.get(s).push(l)};const{sampling:r="all",win:n,blockClass:o,blockSelector:a,recordCanvas:d,dataURLOptions:i}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,d&&r==="all"&&this.initCanvasMutationObserver(n,o,a),d&&typeof r=="number"&&this.initCanvasFPSObserver(r,n,o,a,{dataURLOptions:i})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(t,r,n,o,a){const d=Rt(r,n,o),i=new Map,s=new Wr;s.onmessage=c=>{const{id:f}=c.data;if(i.set(f,!1),!("base64"in c.data))return;const{base64:S,type:C,width:m,height:I}=c.data;this.mutationCb({id:f,type:ue["2D"],commands:[{property:"clearRect",args:[0,0,m,I]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:S}],type:C}]},0,0]}]})};const l=1e3/t;let u=0,h;const p=()=>{const c=[];return r.document.querySelectorAll("canvas").forEach(f=>{G(f,n,o,!0)||c.push(f)}),c},g=c=>{if(u&&c-u<l){h=requestAnimationFrame(g);return}u=c,p().forEach(f=>Rr(this,void 0,void 0,function*(){var S;const C=this.mirror.getId(f);if(i.get(C))return;if(i.set(C,!0),["webgl","webgl2"].includes(f.__context)){const I=f.getContext(f.__context);((S=I==null?void 0:I.getContextAttributes())===null||S===void 0?void 0:S.preserveDrawingBuffer)===!1&&(I==null||I.clear(I.COLOR_BUFFER_BIT))}const m=yield createImageBitmap(f);s.postMessage({id:C,bitmap:m,width:f.width,height:f.height,dataURLOptions:a.dataURLOptions},[m])})),h=requestAnimationFrame(g)};h=requestAnimationFrame(g),this.resetObservers=()=>{d(),cancelAnimationFrame(h)}}initCanvasMutationObserver(t,r,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=Rt(t,r,n),a=Fr(this.processMutation.bind(this),t,r,n),d=Er(this.processMutation.bind(this),t,r,n,this.mirror);this.resetObservers=()=>{o(),a(),d()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=r=>{this.rafStamps.latestId=r,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,r)=>{const n=this.mirror.getId(r);this.flushPendingCanvasMutationFor(r,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,r){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(t);if(!n||r===-1)return;const o=n.map(d=>Mr(d,["type"])),{type:a}=n[0];this.mutationCb({id:r,type:a,commands:o}),this.pendingCanvasMutations.delete(t)}}class Gr{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new ar,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,r){if(t.length===0)return;const n={id:r,styleIds:[]},o=[];for(const a of t){let d;if(this.styleMirror.has(a))d=this.styleMirror.getId(a);else{d=this.styleMirror.add(a);const i=Array.from(a.rules||CSSRule);o.push({styleId:d,rules:i.map((s,l)=>({rule:ze(s),index:l}))})}n.styleIds.push(d)}o.length>0&&(n.styles=o),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class Zr{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(t,r){const n=this.nodeMap.get(t);return n&&Array.from(n).some(o=>o!==r)}add(t,r){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(r))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function W(e){return Object.assign(Object.assign({},e),{timestamp:Date.now()})}let F,Fe,Ue,Ee=!1;const J=Lt();function be(e={}){const{emit:t,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:o="rr-block",blockSelector:a=null,ignoreClass:d="rr-ignore",maskTextClass:i="rr-mask",maskTextSelector:s=null,inlineStylesheet:l=!0,maskAllInputs:u,maskInputOptions:h,slimDOMOptions:p,maskInputFn:g,maskTextFn:c,hooks:f,packFn:S,sampling:C={},dataURLOptions:m={},mousemoveWait:I,recordCanvas:w=!1,recordCrossOriginIframes:Z=!1,recordAfter:L=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:x=!1,collectFonts:R=!1,inlineImages:V=!1,plugins:U,keepIframeSrcFn:H=()=>!1,ignoreCSSAttributes:re=new Set([]),errorHandler:z}=e;cr(z);const q=Z?window.parent===window:!0;let T=!1;if(!q)try{window.parent.document&&(T=!1)}catch{T=!0}if(q&&!t)throw new Error("emit function is required");I!==void 0&&C.mousemove===void 0&&(C.mousemove=I),J.reset();const P=u===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:h!==void 0?h:{password:!0},Q=p===!0||p==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:p==="all",headMetaDescKeywords:p==="all"}:p||{};or();let $,Y=0;const X=y=>{for(const _ of U||[])_.eventProcessor&&(y=_.eventProcessor(y));return S&&!T&&(y=S(y)),y};F=(y,_)=>{var M;if(((M=ae[0])===null||M===void 0?void 0:M.isFrozen())&&y.type!==A.FullSnapshot&&!(y.type===A.IncrementalSnapshot&&y.data.source===b.Mutation)&&ae.forEach(O=>O.unfreeze()),q)t==null||t(X(y),_);else if(T){const O={type:"rrweb",event:X(y),origin:window.location.origin,isCheckout:_};window.parent.postMessage(O,"*")}if(y.type===A.FullSnapshot)$=y,Y=0;else if(y.type===A.IncrementalSnapshot){if(y.data.source===b.Mutation&&y.data.isAttachIframe)return;Y++;const O=n&&Y>=n,te=r&&y.timestamp-$.timestamp>r;(O||te)&&Fe(!0)}};const K=y=>{F(W({type:A.IncrementalSnapshot,data:Object.assign({source:b.Mutation},y)}))},E=y=>F(W({type:A.IncrementalSnapshot,data:Object.assign({source:b.Scroll},y)})),pe=y=>F(W({type:A.IncrementalSnapshot,data:Object.assign({source:b.CanvasMutation},y)})),Le=y=>F(W({type:A.IncrementalSnapshot,data:Object.assign({source:b.AdoptedStyleSheet},y)})),ee=new Gr({mutationCb:K,adoptedStyleSheetCb:Le}),j=new wr({mirror:J,mutationCb:K,stylesheetManager:ee,recordCrossOriginIframes:Z,wrappedEmit:F});for(const y of U||[])y.getMirror&&y.getMirror({nodeMirror:J,crossOriginIframeMirror:j.crossOriginIframeMirror,crossOriginIframeStyleMirror:j.crossOriginIframeStyleMirror});const ge=new Zr;Ue=new Br({recordCanvas:w,mutationCb:pe,win:window,blockClass:o,blockSelector:a,mirror:J,sampling:C.canvas,dataURLOptions:m});const oe=new kr({mutationCb:K,scrollCb:E,bypassOptions:{blockClass:o,blockSelector:a,maskTextClass:i,maskTextSelector:s,inlineStylesheet:l,maskInputOptions:P,dataURLOptions:m,maskTextFn:c,maskInputFn:g,recordCanvas:w,inlineImages:V,sampling:C,slimDOMOptions:Q,iframeManager:j,stylesheetManager:ee,canvasManager:Ue,keepIframeSrcFn:H,processedNodeManager:ge},mirror:J});Fe=(y=!1)=>{F(W({type:A.Meta,data:{href:window.location.href,width:nt(),height:rt()}}),y),ee.reset(),oe.init(),ae.forEach(M=>M.lock());const _=rr(document,{mirror:J,blockClass:o,blockSelector:a,maskTextClass:i,maskTextSelector:s,inlineStylesheet:l,maskAllInputs:P,maskTextFn:c,slimDOM:Q,dataURLOptions:m,recordCanvas:w,inlineImages:V,onSerialize:M=>{it(M,J)&&j.addIframe(M),st(M,J)&&ee.trackLinkElement(M),Ge(M)&&oe.addShadowRoot(M.shadowRoot,document)},onIframeLoad:(M,O)=>{j.attachIframe(M,O),oe.observeAttachShadow(M)},onStylesheetLoad:(M,O)=>{ee.attachLinkElement(M,O)},keepIframeSrcFn:H});if(!_)return console.warn("Failed to snapshot the document");F(W({type:A.FullSnapshot,data:{node:_,initialOffset:tt(window)}}),y),ae.forEach(M=>M.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ee.adoptStyleSheets(document.adoptedStyleSheets,J.getId(document))};try{const y=[],_=O=>{var te;return v(Ar)({mutationCb:K,mousemoveCb:(N,Ye)=>F(W({type:A.IncrementalSnapshot,data:{source:Ye,positions:N}})),mouseInteractionCb:N=>F(W({type:A.IncrementalSnapshot,data:Object.assign({source:b.MouseInteraction},N)})),scrollCb:E,viewportResizeCb:N=>F(W({type:A.IncrementalSnapshot,data:Object.assign({source:b.ViewportResize},N)})),inputCb:N=>F(W({type:A.IncrementalSnapshot,data:Object.assign({source:b.Input},N)})),mediaInteractionCb:N=>F(W({type:A.IncrementalSnapshot,data:Object.assign({source:b.MediaInteraction},N)})),styleSheetRuleCb:N=>F(W({type:A.IncrementalSnapshot,data:Object.assign({source:b.StyleSheetRule},N)})),styleDeclarationCb:N=>F(W({type:A.IncrementalSnapshot,data:Object.assign({source:b.StyleDeclaration},N)})),canvasMutationCb:pe,fontCb:N=>F(W({type:A.IncrementalSnapshot,data:Object.assign({source:b.Font},N)})),selectionCb:N=>{F(W({type:A.IncrementalSnapshot,data:Object.assign({source:b.Selection},N)}))},blockClass:o,ignoreClass:d,maskTextClass:i,maskTextSelector:s,maskInputOptions:P,inlineStylesheet:l,sampling:C,recordCanvas:w,inlineImages:V,userTriggeredOnInput:x,collectFonts:R,doc:O,maskInputFn:g,maskTextFn:c,keepIframeSrcFn:H,blockSelector:a,slimDOMOptions:Q,dataURLOptions:m,mirror:J,iframeManager:j,stylesheetManager:ee,shadowDomManager:oe,processedNodeManager:ge,canvasManager:Ue,ignoreCSSAttributes:re,plugins:((te=U==null?void 0:U.filter(N=>N.observer))===null||te===void 0?void 0:te.map(N=>({observer:N.observer,options:N.options,callback:Ye=>F(W({type:A.Plugin,data:{plugin:N.name,payload:Ye}}))})))||[]},f)};j.addLoadListener(O=>{try{y.push(_(O.contentDocument))}catch(te){console.warn(te)}});const M=()=>{Fe(),y.push(_(document)),Ee=!0};return document.readyState==="interactive"||document.readyState==="complete"?M():(y.push(B("DOMContentLoaded",()=>{F(W({type:A.DomContentLoaded,data:{}})),L==="DOMContentLoaded"&&M()})),y.push(B("load",()=>{F(W({type:A.Load,data:{}})),L==="load"&&M()},window))),()=>{y.forEach(O=>O()),ge.destroy(),Ee=!1,ur()}}catch(y){console.warn(y)}}be.addCustomEvent=(e,t)=>{if(!Ee)throw new Error("please add custom event after start recording");F(W({type:A.Custom,data:{tag:e,payload:t}}))},be.freezePage=()=>{ae.forEach(e=>e.freeze())},be.takeFullSnapshot=e=>{if(!Ee)throw new Error("please take full snapshot after start recording");Fe(e)},be.mirror=J;var ie=(e=>(e.RecordScriptReady="rrweb-extension-record-script-ready",e.StartRecord="rrweb-extension-start-record",e.RecordStarted="rrweb-extension-record-started",e.StopRecord="rrweb-extension-stop-record",e.RecordStopped="rrweb-extension-record-stopped",e.EmitEvent="rrweb-extension-emit-event",e))(ie||{});function Vr(){if(window.parent!==window)try{window.parent.location.origin}catch{return!0}return!1}const _e=[];let Ke=null;function Ur(e){_e.length=0,Ke=be({emit:t=>{_e.push(t),He({message:ie.EmitEvent,event:t})},...e})||null,He({message:ie.RecordStarted,startTimestamp:Date.now()})}const Nt=e=>{if(e.source!==window)return;const t=e.data,r={[ie.StartRecord]:()=>{Ur(t.config||{})},[ie.StopRecord]:()=>{if(Ke)try{Ke()}catch{}He({message:ie.RecordStopped,events:_e,endTimestamp:Date.now()}),window.removeEventListener("message",Nt)}};r[t.message]&&r[t.message]()};function He(e){Vr()||window.postMessage(e,location.origin)}window.addEventListener("message",Nt),window.postMessage({message:ie.RecordScriptReady},location.origin)})();
